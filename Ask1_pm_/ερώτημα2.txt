#include ...
#define ...
...
int tram=0;
...
int main(void)
{
	//Timers: 
	...
	//Tram:
	TCA0.SPLIT.LCNT = ped; //T1
	TCA0.SPLIT.LCMP0 = 0;
	...
	while(1)
	{
	//                    -------- Tram --------
		while (tram==0)
		{
		//                -------- Pezoi --------
			while (pezoi==0){...}
			...
			if(pezoi==1 && tram==0){...}	
			if(tram==1) //xronos dieleusis tram T2
			{
				cli();
				TCA0.SPLIT.HCNT = del; //T2,T3
				TCA0.SPLIT.HCMP0= 0;
				tram=0;
				sei();
			}
		}
	}
	cli();
}

ISR(PORTF_PORT_vect){...}

ISR(TCA0_LCMP0_vect) //
{
	cli();
	int intflags = TCA0.SPLIT.INTFLAGS;
	TCA0.SPLIT.INTFLAGS=intflags;
	PORTD.OUT |= 0b00000111; //LEDs are off
	PORTD.OUTCLR= 0b00000011; //Tram & Pezoi LEDs are on
	tram=1;
	sei();
}

ISR(TCA0_HUNF_vect) //
{
	cli();
	int intflags = TCA0.SPLIT.INTFLAGS;
	TCA0.SPLIT.INTFLAGS=intflags;
	PORTD.OUT |= 0b00000111; //LEDs are off
	PORTD.OUTCLR= 0b00000011; //Tram & Pezoi LEDs are on
	time_3=1;
	sei();
}